---
description: >
  Example of how to run the hmpps/database_schema_report job
usage:
  version: 2.1
  orbs:
    hmpps: ministryofjustice/hmpps@8

  jobs:
    initialise_db_schema:
      executor:
        name: hmpps/java_localstack_postgres
      steps:
        - checkout
        - run:
          # Run any task to initialise the database schema.
          # e.g. a spring integration test to initialise the application context
          # and run flyway scripts.
          # This will allow schemaspy to build the report
          name: Initialise database
          command: ./gradlew build

  workflows:
    generate-schema:
      jobs:
        - initialise_db_schema
        - hmpps/database_schema_report:
            schema: example_schema
